{\rtf1\ansi\ansicpg1252\cocoartf1265\cocoasubrtf210
{\fonttbl\f0\froman\fcharset0 Times-Roman;\f1\fnil\fcharset0 Calibri;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww12240\viewh13140\viewkind1
\deftab720
\pard\pardeftab720\sa240

\f0\fs30 \cf0 \
Alison - do 1\
Tai - do 2\
Alison or Tai - do 3 depending the fastest sort \\\
readme.\
Server
\f1 (void) \{ int i,j;
\f0\fs24 \

\f1\fs30 While(TRUE)\{\uc0\u8232 i = random(3); /* returns a random integer 0, 1 or 2 for i */ j = random(3); /* returns a random integer 0, 1 or 2 for j */
\f0\fs24 \

\f1\fs30 if (i != j) \{ /* i and j must be different */ Wait(all drinking threads);\
\
k = 3 - (i+j); //the drinker with the k-th ingredient is identified Signal(correct drinker);
\f0\fs24 \
\

\f1\fs30 \} \}//end of while
\f0\fs24 \

\f1\fs30 \}//end of Server
\f0\fs24 \

\fs30 Drinker
\f1 (int r) \{ /* r indicates which ingredients this smoker has */ While(TRUE)\{\
Wait(all other drinker threads); Drink( ); Signal(server);
\f0\fs24 \
\

\f1\fs30 \}\uc0\u8232 \}//end of Drinker\
\
\
\
// The first two are semaphores are mutexes (only 0 or 1 possible)\uc0\u8232 Semaphore dentistReady = 0\u8232 Semaphore seatCountWriteAccess = 1 // if 1, the number of seats in the waiting room can be
\f0\fs24 \

\f1\fs30 // incremented or decremented\uc0\u8232 Semaphore patientReady = 0 // the number of patients currently in the waiting room, ready to be
\f0\fs24 \

\f1\fs30 //served\uc0\u8232 int numberOfFreeWRSeats = N // total number of seats in the waiting room
\f0\fs24 \

\fs30 def Dentist():
\fs24 \

\f1\fs30 while true: // Run in an infinite loop.\uc0\u8232 	wait(Dentist) // Try to acquire a patient - if none is available, go to sleep. wait(____________) // Awake - try to get access to modify # of available seats,
\f0\fs24 \

\f1\fs30 //otherwise sleep. numberOfFreeWRSeats += 1 // One waiting room chair becomes free.
\f0\fs24 \

\f1\fs30 signal(Dentist is ready) // I am ready to consult.
\f0\fs24 \

\f1\fs30 signal(____________) // Don't need the lock on the chairs anymore. // (Talk to patient here.)
\f0\fs24 \

\fs30 def Customer():
\fs24 \

\f1\fs30 while true: // Run in an infinite loop to simulate multiple patients.\
 \
	wait(other customers) // Try to get access to the waiting room chairs. if numberOfFreeWRSeats > 0: // If there are any free seats:\
	numberOfFreeWRSeats -= 1 // sit down in a chair\
	signal(dentist) // notify the dentist, who's waiting until there is a patient\
	signal(____________)
\f0\fs24   
\f1\fs30 // don't need to lock the chairs anymore
\f0\fs24 \
\

\f1\fs30 \uc0\u8232 // (Consult dentist here.)
\f0\fs24 \

\f1\fs30 // notify the dentist, who's waiting until there is a patient
\f0\fs24 \
\
\

\f1\fs30 else:
\f0\fs24 \

\f1\fs30 // otherwise, there are no free seats; tough luck -- signal(____________) // but don't forget to release the lock on the seats! // (Leave without consulting the dentist.)
\f0\fs24 \

\f1\fs30 numberOfFreeWRSeats -= 1 // sit down in a chair
\f0\fs24 \

\f1\fs30 signal(___________) \
signal(____________) wait(____________)\uc0\u8232 // (Consult dentist here.)
\f0\fs24 \
\
\
\
def Dentist:\
while true:\
	if no patients sleep.\
	wait (Dentist)\
	if there is a patient:\
		lock seats (wait \
		dentist is ready, unlock seats - so people can come in.  signal (other patients)\
		free seents increments up\
		one less person, \
\
\
\
\
\
\ul Question 3\ulnone \
\
Monitor does all the work, so we just need to code. yay!\
spy writes message on paper and drops it.\
peacelover agent picks up and delivers.\
\
spy drops a new message only if previous message has been picked up.\
\
spies write one word messages.\
\
\
spies empty? if you\'92re empty put in phrase, o/w put it n monitor.\
agents - espionage do you have monitor, then work.  multiple spies access monitor and agent-s-\
\
code use monitor.\
\
Monitors do that for us.\
		\
\
\
\
\
}